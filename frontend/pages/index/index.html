<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/components/footer/footer.css ">
    <link rel="stylesheet" href="index.css">
    <title>OpenLodge</title>
</head>
<body>
    <!-- Header -->
    <header class="header" id="header">
        
    </header>

    <!-- Carousel -->
    <div class="carousel-container">
        <div class="carousel-slide active">
            <img src="https://images.unsplash.com/photo-1566073771259-6a8506099945?w=1600" alt="Hotel de lujo">
            <div class="carousel-overlay">
                <h1>Descubre tu próximo destino</h1>
                <p>Encuentra los mejores alojamientos con la comodidad y tranquilidad que buscas</p>
            </div>
        </div>
        
        <div class="carousel-slide">
            <img src="https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=1600" alt="Resort tropical">
            <div class="carousel-overlay">
                <h1>Experiencias únicas</h1>
                <p>Vive momentos inolvidables en lugares extraordinarios</p>
            </div>
        </div>
        
        <div class="carousel-slide">
            <img src="img/hotel3.jpg" alt="Vista al mar">
            <div class="carousel-overlay">
                <h1>Tu escape perfecto</h1>
                <p>Relájate y disfruta en los mejores destinos del mundo</p>
            </div>
        </div>

        <div class="carousel-controls">
            <button class="carousel-btn" id="prevBtn">
                <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"/></svg>
            </button>
            <button class="carousel-btn" id="nextBtn">
                <svg viewBox="0 0 24 24"><path d="M9 6l6 6-6 6"/></svg>
            </button>
        </div>

        <div class="carousel-dots" id="dots"></div>
    </div>

    <!-- Search Bar -->
    <section class="search-section">
        <div class="search-container">
            <div class="search-group">
                <label for="destination">Destino</label>
                <input type="text" id="destination" class="search-input" placeholder="¿A dónde vas?">
            </div>
            
            <div class="search-group">
                <label for="checkin">Check-in</label>
                <input type="date" id="checkin" class="search-input">
            </div>
            
            <div class="search-group">
                <label for="checkout">Check-out</label>
                <input type="date" id="checkout" class="search-input">
            </div>
            
            <div class="search-group">
                <label for="guests">Huéspedes</label>
                <input type="number" id="guests" class="search-input" placeholder="2 adultos" min="1" max="20">
            </div>
            
            <button class="search-btn">
                <svg viewBox="0 0 24 24"><path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke="currentColor" stroke-width="2" fill="none"/></svg>
                Buscar
            </button>
        </div>
    </section>

    <!-- Main Content (Tu contenido existente) -->
    <main class="main-content">
        <h1>*** --- *** --- </h1>
    </main>

    <section class="destinations" id="destinos">
        <div class="section-title">
            <h2>Destinos Destacados</h2>
            <p>Explora nuestras propiedades más exclusivas</p>
        </div>
        <div class="destinations-grid">
            <div class="destination-card">
                <div class="destination-image" style="background-image: url(img/hotel5.jpg);">
                    <span class="destination-badge">Más Popular</span>
                </div>
                <div class="destination-content">
                    <div class="destination-header">
                        <h3 class="destination-title">Resort Paradise Beach</h3>
                        <div class="rating">
                            <span class="stars">★★★★★</span>
                            <span>4.9</span>
                        </div>
                    </div>
                    <p style="color: var(--gray-medium);">Cancún, México</p>
                    <div class="destination-price">
                        $299 <span>/ noche</span>
                    </div>
                    <button class="btn btn-primary" style="width: 100%;">Reservar ahora</button>
                </div>
            </div>
            <div class="destination-card">
                <div class="destination-image" style="background-image: url(img/hotel6.jpg);">
                    <span class="destination-badge">Oferta Especial</span>
                </div>
                <div class="destination-content">
                    <div class="destination-header">
                        <h3 class="destination-title">Hotel Urban Elite</h3>
                        <div class="rating">
                            <span class="stars">★★★★★</span>
                            <span>4.8</span>
                        </div>
                    </div>
                    <p style="color: var(--gray-medium);">Nueva York, USA</p>
                    <div class="destination-price">
                        $450 <span>/ noche</span>
                    </div>
                    <button class="btn btn-primary" style="width: 100%;">Reservar ahora</button>
                </div>
            </div>
            <div class="destination-card">
                <div class="destination-image" style="background-image: url(img/hotel7.jpg);">
                    <span class="destination-badge">Lujo</span>
                </div>
                <div class="destination-content">
                    <div class="destination-header">
                        <h3 class="destination-title">Villa Montaña Serena</h3>
                        <div class="rating">
                            <span class="stars">★★★★★</span>
                            <span>5.0</span>
                        </div>
                    </div>
                    <p style="color: var(--gray-medium);">Alpes Suizos, Suiza</p>
                    <div class="destination-price">
                        $599 <span>/ noche</span>
                    </div>
                    <button class="btn btn-primary" style="width: 100%;">Reservar ahora</button>
                </div>
            </div>
        </div>
    </section>
    <script>
        // TypeScript compilado a JavaScript
        class HeaderController {
            constructor() {
                this.header = document.getElementById('header');
                this.nav = document.getElementById('nav');
                this.mobileToggle = document.getElementById('mobileToggle');
                this.init();
            }

            init() {
                // Sticky header on scroll
                window.addEventListener('scroll', () => {
                    if (window.scrollY > 50) {
                        this.header.classList.add('scrolled');
                    } else {
                        this.header.classList.remove('scrolled');
                    }
                });

                // Mobile menu toggle
                this.mobileToggle?.addEventListener('click', () => {
                    this.nav.classList.toggle('mobile-active');
                });

                // Dynamic header based on user role
                this.updateHeaderByRole();
            }

            updateHeaderByRole() {
                const userRole = this.getUserRole(); // Simulated - replace with actual role logic
                
                if (userRole === "ANFITRION") {
                    this.updateMenuForHost();
                } else if (userRole === "HUESPED") {
                    this.updateMenuForGuest();
                }
            }

            getUserRole() {
                // This should connect to your actual authentication system
                return localStorage.getItem('userRole') || 'GUEST';
            }

            updateMenuForHost() {
                const navCenter = document.querySelector('.nav-center');
                navCenter.innerHTML = `
                    <li><a href="#inicio">Inicio</a></li>
                    <li><a href="#propiedades">Mis Propiedades</a></li>
                    <li><a href="#agregar">Agregar Propiedad</a></li>
                    <li><a href="#reservas">Reservaciones</a></li>
                `;
            }

            updateMenuForGuest() {
                const navCenter = document.querySelector('.nav-center');
                navCenter.innerHTML = `
                    <li><a href="#inicio">Inicio</a></li>
                    <li><a href="#destinos">Destinos</a></li>
                    <li><a href="#favoritos">Favoritos</a></li>
                    <li><a href="#reservas">Mis Reservas</a></li>
                `;
            }
        }

        class CarouselController {
            constructor() {
                this.currentSlide = 0;
                this.slides = document.querySelectorAll('.carousel-slide');
                this.dotsContainer = document.getElementById('dots');
                this.prevBtn = document.getElementById('prevBtn');
                this.nextBtn = document.getElementById('nextBtn');
                this.autoPlayInterval = null;
                this.init();
            }

            init() {
                this.createDots();
                this.updateSlide();
                this.startAutoPlay();
                
                this.prevBtn?.addEventListener('click', () => this.prevSlide());
                this.nextBtn?.addEventListener('click', () => this.nextSlide());

                // Pause autoplay on hover
                const container = document.querySelector('.carousel-container');
                container?.addEventListener('mouseenter', () => this.stopAutoPlay());
                container?.addEventListener('mouseleave', () => this.startAutoPlay());
            }

            createDots() {
                this.slides.forEach((_, index) => {
                    const dot = document.createElement('div');
                    dot.className = 'dot';
                    if (index === 0) dot.classList.add('active');
                    dot.addEventListener('click', () => this.goToSlide(index));
                    this.dotsContainer?.appendChild(dot);
                });
            }

            updateSlide() {
                this.slides.forEach((slide, index) => {
                    slide.classList.toggle('active', index === this.currentSlide);
                });

                const dots = this.dotsContainer?.querySelectorAll('.dot');
                dots?.forEach((dot, index) => {
                    dot.classList.toggle('active', index === this.currentSlide);
                });
            }

            nextSlide() {
                this.currentSlide = (this.currentSlide + 1) % this.slides.length;
                this.updateSlide();
            }

            prevSlide() {
                this.currentSlide = (this.currentSlide - 1 + this.slides.length) % this.slides.length;
                this.updateSlide();
            }

            goToSlide(index) {
                this.currentSlide = index;
                this.updateSlide();
            }

            startAutoPlay() {
                this.autoPlayInterval = setInterval(() => this.nextSlide(), 5000);
            }

            stopAutoPlay() {
                if (this.autoPlayInterval) {
                    clearInterval(this.autoPlayInterval);
                }
            }
        }

        class SearchController {
            constructor() {
                this.searchBtn = document.querySelector('.search-btn');
                this.destinationInput = document.getElementById('destination');
                this.checkinInput = document.getElementById('checkin');
                this.checkoutInput = document.getElementById('checkout');
                this.guestsInput = document.getElementById('guests');
                this.init();
            }

            init() {
                // Set minimum date to today
                const today = new Date().toISOString().split('T')[0];
                if (this.checkinInput) this.checkinInput.min = today;
                if (this.checkoutInput) this.checkoutInput.min = today;

                // Handle check-in date change
                this.checkinInput?.addEventListener('change', (e) => {
                    const checkinDate = e.target.value;
                    if (this.checkoutInput) {
                        this.checkoutInput.min = checkinDate;
                        if (this.checkoutInput.value && this.checkoutInput.value < checkinDate) {
                            this.checkoutInput.value = '';
                        }
                    }
                });

                // Handle search
                this.searchBtn?.addEventListener('click', () => this.performSearch());
            }

            performSearch() {
                const searchData = {
                    destination: this.destinationInput?.value,
                    checkin: this.checkinInput?.value,
                    checkout: this.checkoutInput?.value,
                    guests: this.guestsInput?.value
                };

                console.log('Searching with:', searchData);
                // Implement your search logic here
                // You can redirect to search results page or trigger an API call
            }
        }

        // Initialize controllers when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            new HeaderController();
            new CarouselController();
            new SearchController();
        });
    </script>
    
    
    <script src="/components/header/header.js"></script>
    <script src="/components/footer/footer.js"></script>
    <script src="/services/enrutador.js"></script>
    <script src="/services/userRoleManager.js"></script>
</body>
</html>